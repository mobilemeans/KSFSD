<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>KID STORIES FOR SPORT DADS</title>
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.3.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.js"></script>
<script type="text/javascript" src="http://www.modernizr.com/downloads/modernizr-latest.js"></script>
<link rel="stylesheet" href="style.css" />


<script>
var linkValue = "";
	(function(){
var teamId = "A4CTeamId";
var _teamId = localStorage.getItem(teamId);
var strLeague = "";

if (localStorage.getItem("A4CLeague") == "basketball/nba"){
			strLeague = "nba";
}
else if(localStorage.getItem("A4CLeague") == "football/nfl"){
			strLeague = "nfl";
}
else if(localStorage.getItem("A4CLeague") == "hockey/nhl"){
			strLeague = "nhl";
}
else{
			strLeague = "mlb";
}							
						
	
	//NOW API
	//change theh leagues and/or team value, if the limit is set to 1 then the ability to align the image with the text disappears.  ideally would want images to align with more than 1 story
	var espnAPI = "http://api.espn.com/v1/now?leagues="+strLeague+"&teams="+_teamId+"&limit=1&apikey=vy6k3rzwkkfaefg7nkpyd2af&callback=?";
	

	
	$.getJSON(espnAPI, {
		format: "json"
		})
		.done(function(data){		
			var ol = $("<ol/>");
			var strDesc = "";
			var teamName = "";
			var description = "";
			var headline = "";
			var linkText = "";
			var links = "";
			var imgNow = "";
			
			//need to change the value for "data.feed" or "data.sports" dependent upon API call.  use the sample URI in a browser to get the return values or use the sample API tool on their site
			$.each(data.feed, 
			function(){				
			
				
				//USE FOR NOW FEED
				//get the selected player's team's news			
				teamName = this.categories[0].description;
				description = this.description;
				headline = this.headline;				
				linkText = this.linkText;
				links = this.links.web.href;				
				
				$('#pTeamName').text('TEST headline description and links:' + headline);
				$('#pDescription').text(description);
				linkValue = links;
				$('#pStoryURL').html('<a href='+linkValue+' target=_blank>Read: '+linkText+'</a>');
				
				if (this.images[0].url !== 'undefined'){					
					var img1 = this.images[0].url;
					var _img = $('<img src='+img1+'>');
					$('#imgTeam').html(_img);
				}
								
			});					
		});				
	})();
	
	
	</script>


</head>
<body>



<section data-role="page" id="pagePreferences">
    	<div data-role="header" data-theme="a">
	<script type="text/javascript"><!--
google_ad_client = "ca-pub-6908679240944495";
/* MobileBanner320by50 */
google_ad_slot = "7580604750";
google_ad_width = 320;
google_ad_height = 50;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>


		<div data-role="navbar" data-theme="c">
			<ul>
      			<li><a href="Main.html" rel="external" data-transition="slideup" data-prefetch>Home</a></li>
      			<li><a href="NBA.html" rel="external" data-transition="slidedown" data-prefetch>NBA</a></li>
				<li><a href="NFL.html" rel="external" data-transition="pop" data-prefetch>NFL</a></li>
				<li><a href="MLB.html" rel="external" data-transition="pop" data-prefetch>MLB</a></li>
				<li><a href="NHL.html" rel="external" data-transition="slidedown" data-prefetch>NHL</a></li>								
			</ul>
		</div><!-- /navbar-->
		
	</div><!-- /header -->
    <section data-role="content">		
         
          
		<!--<ul data-role="listview" data-inset="true">
            <li data-role="list-divider">KID STORIES FOR SPORT DADS, by Troy MacFarlane</li>					 
		</ul> -->
		<div id="teamNews">		
			
			<p id="pTeamName"  style="font-family:arial;color:red;font-size:20px;font-weight: bold"/>
			<p id="pDescription" />  
			<p id="pStoryURL" />
			<img id="imgTeam" /> 		
		</div>
		
<div data-role="controlgroup" data-type="horizontal">
        <a href="TeamA.html" rel="external" data-transition="pop" data-role="button" data-icon="arrow-l" data-prefetch>Prev Page</a>
      	<a href="TeamC.html" rel="external" data-transition="pop" data-role="button" data-icon="arrow-r" data-prefetch>Next Page</a>
        
</div>
    </section>

	
	<div id="footer"><center>
		<img src="img/A4C.jpg" />
			&copy; Apps4Canadians
			</center>
			<br>
			<center><a href="index.html" rel="external" data-transition="slideup" data-prefetch>Home</a>- <a href="mailto:apps4canadians@live.com">Contact</a> - </center>
	</div><!-- /footer -->
	
</section>	
	
	
	
</body>
</html>
